---
# TODO Make this email or log updates.
# You should never use this as-is.
- name: Update all machines & containers
  hosts: all
  tasks:
    - name: Update all packages
      become: true
      ansible.builtin.dnf:
        name: "*"
        state: latest
        update_cache: true
    - name: Update all podman images
      become: true
      ansible.builtin.command: podman auto-update
    - name: Update snaps
      when: "'clients' in group_names"
      become: true
      ansible.builtin.command: snap refresh
    - name: Update all flatpak packages
      when: "'interactive_boxes' in group_names"
      become: true
      ansible.builtin.command: flatpak update -y
